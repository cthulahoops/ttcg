[
  {
    "id": "setup-eslint",
    "title": "Setup eslint",
    "status": "completed",
    "notes": "Added eslint with typescript-eslint and eslint-plugin-react-hooks. Config in eslint.config.js. Run via 'bun run lint'. no-explicit-any set to warn (to be addressed separately). no-unused-vars disabled (TypeScript handles via noUnusedLocals). Fixed react-hooks error in useGameWebSocket.ts."
  },
  {
    "id": "no-explicit-any",
    "title": "Enforce no-explicit-any rule and review existing exceptions",
    "status": "completed",
    "depends": "setup-eslint",
    "notes": "Fixed 9 no-explicit-any warnings across 5 files. Changed rule from warn to error. Key changes: protocol uses unknown for network boundary types, server/controllers uses typed DecisionRequest with targeted type assertions, shared/game.ts uses proper type narrowing for optional getCards method."
  },
  {
    "id": "galadriel-setup-fix",
    "title": "Fix Galadriel's setup action",
    "status": "completed",
    "notes": "Offers exchange with Gandalf when not in play. Single prompt: exchange with Gandalf, lost card, skip? Only include valid options, don't ask at all if no lost card."
  },
  {
    "id": "exchange-return-clarity",
    "title": "Clarify which card was received when choosing return card in exchange",
    "status": "completed",
    "notes": "Exchange dialog message now shows 'You received X of Y. Choose a card to give to Z' so the receiver knows which card they just got."
  },
  {
    "id": "hide-player-names-after-characters",
    "title": "Remove player names from display when character names are known",
    "status": "completed",
    "notes": "PlayerSeat.tsx now shows only character name when assigned, matching server-side getDisplayName() behavior."
  },
  {
    "id": "prettier-check",
    "title": "Add check for prettier formatting and reformat code",
    "status": "completed",
    "notes": "Added prettier with .prettierrc config. New scripts: 'format' to auto-fix, 'format:check' to verify. All code reformatted."
  },
  {
      "id": "remove-trump-text",
      "title": "TrickDisplay doesn't neeed to include the word (TRUMP) existing yellow outline is sufficient.",
      "status": "completed"
  },
  {
    "id": "shadowfax-mechanic",
    "title": "Implement Shadowfax 'set one card aside' mechanic",
    "status": "completed",
    "notes": "Core character ability now implemented. Card can be set aside during setup, returned at any point, or auto-returned when hand is empty."
  },
  {
    "id": "bilbo-mechanic",
    "title": "Implement Bilbo Baggins 'choose next leader' mechanic",
    "status": "completed",
    "notes": "Bilbo can choose who leads the next trick when he wins. Implemented in runTrickTakingPhase."
  },
  {
    "id": "tom-bombadil-completable",
    "title": "Implement proper isCompletable logic for Tom Bombadil",
    "status": "completed",
    "notes": "Now checks if any suit in hand can still reach 3 won cards based on remaining cards in play."
  },
  {
    "id": "available-characters-count",
    "title": "Limit available characters to Frodo + 1 per seat",
    "status": "completed",
    "notes": "Changed from fixed 4 non-Frodo characters to numCharacters non-Frodo characters, resulting in numCharacters + 1 total (including Frodo). This means 4 total for 3-seat games, 5 total for 4-seat games."
  },
  {
    "id": "seat-character-refactor",
    "title": "Consolidate Seat character and characterDef into single attribute 'Character'",
    "status": "completed",
    "notes": "Removed characterDef field, changed character type from string|null to CharacterDefinition|null. All references to seat.character now use seat.character?.name for the name. Serialization extracts the name for client consumption."
  },
  {
    "id": "rotate-seats-ui",
    "title": "Rotate seat display so viewer's seat appears at top",
    "status": "completed",
    "notes": "Added viewerSeat field to SerializedGame and serialization. GameScreen now rotates seats array so viewer's seat appears first. This places the player's own hand at the top of the screen for easier access."
  },
  {
    "id": "play-again-timeout",
    "title": "Add timeout for play-again responses",
    "status": "completed",
    "notes": "1-hour timeout defaulting to 'no'. Extended Room interface with playAgainHandler, playAgainRequestId, and playAgainTimeout fields."
  },
  {
    "id": "play-again-cleanup",
    "title": "Clean up play-again handler when continuing to next round",
    "status": "completed",
    "notes": "Handler, request ID, and timeout are now cleaned up via cleanup() function on response or timeout."
  },
  {
    "id": "seat-hand-type",
    "title": "Handle seat.hand optionality at type layer",
    "status": "completed",
    "notes": "Seat.hand is now required at construction time. All non-null assertions removed."
  },
  {
    "id": "consolidate-character-definition",
    "title": "Consolidate duplicate CharacterDefinition interfaces",
    "status": "completed",
    "notes": "Removed duplicate CharacterDefinition and SetupContext from shared/types.ts. The canonical versions live in shared/characters/types.ts and shared/game.ts respectively."
  },
  {
    "id": "mountains-constant",
    "title": "Extract magic number 8 (total mountains cards) to constant",
    "status": "completed",
    "notes": "Added CARDS_PER_SUIT constant to shared/types.ts. Updated gloin.ts, arwen.ts, glorfindel.ts, and tom-bombadil.ts to use the constant instead of magic numbers."
  },
  {
    "id": "bilbo-completable",
    "title": "Fix Bilbo isCompletable to check trick achievability",
    "status": "completed",
    "notes": "Now checks both: (1) no 1-Ring won, and (2) tricksWon + tricksRemaining >= 3"
  },
  {
      "id": "farmer-maggot-setup-text",
      "title": "Maggot's setup text is wrong",
      "status": "completed",
      "notes": "Reads: 'Setup: Draw a Hills threat card, then exchange with Merry or Pippin' the word hills is irrelevant."
    },
    {
      "id": "pyramid-control",
      "title": "Control log is wrong for pyramid",
      "status": "could-not-reproduce",
      "notes": "Investigated formula and logging - both appear correct. Smoke tests show correct behavior."
    },
    {
        "id": "clear-game-log",
        "title": "The game log should be cleared at start of a new game.",
      "status": "completed"
    }

]
